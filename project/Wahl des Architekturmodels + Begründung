Wahl des Architekturmodells + BegrÃ¼ndung
=========================================

Modell: 3-Schichten-Architektur (Three-Tier Architecture)
---------------------------------------------------------

Kategorie: Schichtenarchitektur fuer Web-Anwendungen mit klarer Trennung
von Praesentation, Geschaeftslogik und Datenzugriff.


1. Problemstellung
------------------

ZettelWeb ist eine Web-Anwendung, die Zettel aus dem Zettelstore abruft
und visuell darstellt. Die Kommunikation erfolgt ueber HTTP/1, ein
zustandsloses Request-Response-Protokoll.

Anforderungen an die Architektur:
- Trennung von Verantwortlichkeiten
- Wartbarkeit und Erweiterbarkeit
- Testbarkeit einzelner Komponenten
- Unterstuetzung der geplanten Graph-Visualisierung
- Kompatibilitaet mit HTTP/1 Request-Response-Modell


2. Architekturentscheidung
--------------------------

Gewaehlt: 3-Schichten-Architektur (Three-Tier Architecture)

Verworfen: MVC (Model-View-Controller)

Begruendung fuer die Verwerfung von MVC:
MVC wurde urspruenglich fuer Desktop-Anwendungen mit direkter
Event-Verarbeitung konzipiert (Smalltalk, 1979). Das Muster erfordert:

- Observer-Pattern: View "beobachtet" Model-Aenderungen in Echtzeit
- Event-Driven Updates: Automatische Benachrichtigung bei Datenaenderung
- Zustandsbehaftete Verbindung: Kontinuierliche Kommunikation Client-Server

HTTP/1 als zustandsloses Protokoll kann diese Anforderungen nicht erfuellen:
- Jede Anfrage ist isoliert und unabhaengig
- Keine persistente Verbindung zwischen Client und Server
- Kein natives Event-System fuer Server-zu-Client-Benachrichtigungen
- View-Updates nur durch expliziten Page Reload moeglich

Fazit: Eine Web-Anwendung auf Basis von HTTP/1 kann nie echtes MVC sein.


3. Die 3-Schichten-Architektur
------------------------------

Die 3-Schichten-Architektur unterteilt die Anwendung horizontal in drei
logisch getrennte Ebenen mit klaren Verantwortlichkeiten:

+-------------------------------------------------------------------+
|                    PRAESENTATIONSSCHICHT                          |
|                     (Presentation Tier)                           |
|                                                                   |
|   Verantwortung:                                                  |
|   - Darstellung der Benutzeroberflaeche                           |
|   - Entgegennahme von Benutzereingaben                            |
|   - Rendering von HTML, CSS, JavaScript                           |
|                                                                   |
|   Komponenten:                                                    |
|   - templates/index.html (Zettel-Uebersicht)                      |
|   - templates/zettel_content.html (Detailansicht)                 |
|   - templates/graph.html (Graph-Visualisierung, geplant)          |
|   - static/style.css (Styling)                                    |
|   - static/js/graph.js (D3.js Visualisierung, geplant)            |
+-------------------------------------------------------------------+
                              ^
                              | Aufbereitete Daten
                              v
+-------------------------------------------------------------------+
|                       LOGIKSCHICHT                                |
|                   (Business Logic Tier)                           |
|                                                                   |
|   Verantwortung:                                                  |
|   - Verarbeitung von HTTP-Anfragen (Routing)                      |
|   - Geschaeftslogik (Sortierung, Filterung, Suche)                |
|   - Datenanreicherung (Tags, Links zuordnen)                      |
|   - Koordination zwischen Praesentation und Daten                 |
|                                                                   |
|   Komponenten:                                                    |
|   - Flask Routes (@app.route)                                     |
|   - Service-Funktionen (sort_zettel, filter_by_query)             |
|   - Datenaufbereitung fuer Views                                  |
+-------------------------------------------------------------------+
                              ^
                              | Rohdaten (JSON/Text)
                              v
+-------------------------------------------------------------------+
|                       DATENSCHICHT                                |
|                    (Data Access Tier)                             |
|                                                                   |
|   Verantwortung:                                                  |
|   - Kommunikation mit externen Datenquellen                       |
|   - API-Aufrufe zum Zettelstore                                   |
|   - Fehlerbehandlung bei Verbindungsproblemen                     |
|   - Datenabstraktion (Repository-Pattern)                         |
|                                                                   |
|   Komponenten:                                                    |
|   - request_zettel_page() - Zettel-Liste abrufen                  |
|   - get_tags() - Tag-Zuordnungen abrufen                          |
|   - get_links() - Verbindungen abrufen                            |
|   - get_zettel_by_id() - Einzelnen Zettel abrufen                 |
+-------------------------------------------------------------------+
                              ^
                              | HTTP REST API
                              v
+-------------------------------------------------------------------+
|                       ZETTELSTORE                                 |
|                   (Externe Datenquelle)                           |
|                                                                   |
|   http://127.0.0.1:23123                                          |
|   - /z (Zettel-Liste)                                             |
|   - /z/{id} (Einzelner Zettel)                                    |
|   - /z?q=|tags (Tag-Abfrage)                                      |
|   - /z?q=|links (Link-Abfrage)                                    |
+-------------------------------------------------------------------+


4. Kriterien und Bewertung
--------------------------

Kriterium                          | 3-Schichten | MVC
-----------------------------------|-------------|-------------
HTTP/1 Kompatibilitaet             | Ja          | Nein
Zustandslosigkeit                  | Ja          | Nein
Trennung der Verantwortlichkeiten  | Ja          | Ja
Wartbarkeit                        | Hoch        | Hoch
Erweiterbarkeit                    | Hoch        | Mittel
Testbarkeit                        | Hoch        | Mittel
Web-Standard                       | Ja          | Nein
Komplexitaet                       | Gering      | Hoch


5. Vergleich mit verworfenen Alternativen
-----------------------------------------

MVC (Model-View-Controller):
- Verworfen wegen: Inkompatibilitaet mit HTTP/1, erfordert Observer-Pattern
- Ursprung: Desktop-Anwendungen (Smalltalk, 1979)
- Problem: Keine Event-basierte View-Aktualisierung moeglich

Pipes & Filters:
- Verworfen wegen: Fokus auf Datenstroeme, nicht auf Visualisierung
- Geeignet fuer: Datenverarbeitungs-Pipelines, ETL-Prozesse
- Problem: Keine interaktive Benutzeroberflaeche vorgesehen

Service-Oriented Architecture (SOA):
- Verworfen wegen: Zu komplex fuer den Projektumfang
- Geeignet fuer: Verteilte Unternehmenssysteme
- Problem: Overhead durch Service-Orchestrierung


6. Konsequenzen fuer die Implementierung
----------------------------------------

Strukturierung des Codes:
- Klare Trennung in drei Module/Packages
- Jede Schicht hat definierte Schnittstellen
- Abhaengigkeiten nur von oben nach unten (Praesentation -> Logik -> Daten)

Datenfluss:
1. HTTP-Request erreicht Praesentationsschicht
2. Route leitet an Logikschicht weiter
3. Logikschicht ruft Datenschicht auf
4. Datenschicht kommuniziert mit Zettelstore
5. Daten fliessen zurueck durch alle Schichten
6. HTTP-Response mit gerendertem HTML

Testbarkeit:
- Datenschicht: Unit-Tests mit Mock-API
- Logikschicht: Unit-Tests ohne UI-Abhaengigkeit
- Praesentationsschicht: Integration-Tests mit Test-Client

Erweiterbarkeit:
- Neue Views (z.B. Graph) nur in Praesentationsschicht
- Neue Logik (z.B. Clustering) nur in Logikschicht
- Neue Datenquellen nur in Datenschicht


7. Mapping: Aktuelle Implementierung
------------------------------------

Komponente               | Schicht        | Datei
-------------------------|----------------|---------------------------
index.html               | Praesentation  | templates/index.html
zettel_content.html      | Praesentation  | templates/zettel_content.html
style.css                | Praesentation  | static/style.css
@app.route('/')          | Logik          | app.py (routes)
@app.route('/zettel/id') | Logik          | app.py (routes)
sort_zettel()            | Logik          | app.py (services)
request_zettel_page()    | Daten          | app.py (repository)
get_tags()               | Daten          | app.py (repository)
get_links()              | Daten          | app.py (repository)


8. Zusammenfassung
------------------

Die 3-Schichten-Architektur ist die optimale Wahl fuer ZettelWeb, da sie:

1. Mit dem zustandslosen HTTP/1-Protokoll kompatibel ist
2. Klare Trennung der Verantwortlichkeiten bietet
3. Unabhaengige Testbarkeit jeder Schicht ermoeglicht
4. Einfache Erweiterung um Graph-Visualisierung erlaubt
5. Dem Standard fuer Web-Anwendungen entspricht

Die urspruenglich gewaehlte MVC-Architektur wurde verworfen, da HTTP/1
keine Event-basierte Kommunikation zwischen Model und View unterstuetzt,
die fuer echtes MVC zwingend erforderlich ist.
